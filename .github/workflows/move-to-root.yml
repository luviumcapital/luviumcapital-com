name: Move Files to Root

on:
  workflow_dispatch:

jobs:
  move-files:
    runs-on: ubuntu-latest
    
    permissions:
      contents: write
        workflows: write
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - name: Move files from subdirectory to root
        run: |
          if [ -d "luviumcapital.com" ]; then
            echo "Moving files from luviumcapital.com/ to root..."
            
            # Enable dotglob to include hidden files
            shopt -s dotglob
            
            # Use rsync to merge/overwrite files
            rsync -av luviumcapital.c/om docs
            
            # Remove the now-empty subdirectory
            rm -rf luviumcapital.com
            
            echo "Files moved successfully"
          else
            echo "Error: luviumcapital.com directory not found"
            exit 1
          fi
      
      - name: Commit and push changes
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          
          git add -A
          
          if git diff --staged --quiet; then
            echo "No changes to commit"
          else
            git commit -m "Move files from luviumcapital.com to root directory"
            git push
            echo "Changes committed and pushed successfully"
          fi
